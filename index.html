<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="index.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="icon.ico" type="image/x-icon" />
    <title>Space Invaders</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div class="menu">
        <h1 class="title">SPACE INVADERS</h1>
        <button class="play-button" id="playButton">Play</button>
        <div class="volume-container">
            <span class="volume-label">Volume</span>
            <input type="range" class="volume-slider" min="0" max="100" value="50">
        </div>
    </div>

    <!-- Dedicated Game Section (Always Present) -->
    <div class="game-container" id="gameContainer">
        <canvas id="gameCanvas"></canvas>
    </div>

    <!-- Load Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Play Button Logic (Only Controls Visibility) -->
    <script>
        document.getElementById("playButton").addEventListener("click", () => {
            console.log("Play button clicked!");
            document.querySelector(".menu").style.display = "none"; // Hide menu
            document.getElementById("gameContainer").style.display = "block"; // Show game
    
            document.body.classList.add("game-started"); // Change background
            startGame(); // Start the game
        });
    </script>

    <!-- Separate Game Logic (Not Inside the Play Button Function) -->
    <script>
        let scene, camera, renderer, cube;

        function initGame() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById("gameCanvas") });
            renderer.setSize(400, 400);

            // Add a cube
            const geometry = new THREE.BoxGeometry();
            const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
            cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
        }

        function animate() {
            requestAnimationFrame(animate);
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            renderer.render(scene, camera);
        }

        function startGame() {
            if (!scene) {
                initGame(); // Initialize the game once
            }
            animate(); // Start the game animation
        }
    </script>    
</body>
</html>
